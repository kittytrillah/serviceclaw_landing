---
import { markdownify } from "@/lib/utils/textConverter";
import { AiFillCheckCircle, AiOutlineCloseCircle } from "react-icons/ai";

const { price_comparison } = Astro.props;
---

{price_comparison && (
  <section class="section">
    <div class="container">
      <div class="row justify-center text-center">
        <div class="lg:col-10">
          <h2 class="h1 mb-4" set:html={markdownify(price_comparison.title)} />
          <p class="text-lg mb-12" set:html={markdownify(price_comparison.subtitle)} />
        </div>
      </div>

      <div class="row justify-center">
        <div class="lg:col-10">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                {price_comparison.cards.map((card: any, index: number) => (
                    <div class={`relative p-8 rounded-2xl border ${card.highlight ? 'bg-white border-primary shadow-xl scale-105 z-10' : 'bg-theme-light border-border grayscale-[0.5]'}`}>
                        
                        {card.highlight && (
                            <div class="absolute top-0 right-0 bg-primary text-white text-xs font-bold px-3 py-1 rounded-bl-lg rounded-tr-lg">
                                RECOMMENDED
                            </div>
                        )}

                        <div class="mb-6">
                            <h3 class="h4 mb-2">{card.title}</h3>
                            <div class="flex items-end gap-1 mb-2">
                                <span class={`text-4xl font-bold ${card.highlight ? 'text-primary' : 'text-text-dark'}`}>{card.price}</span>
                                <span class="text-text-light mb-1">{card.period}</span>
                            </div>
                            <p class="text-sm text-text-light">{card.details}</p>
                        </div>

                        <div class="border-t border-border my-6"></div>

                        <ul class="space-y-4 mb-8">
                            {card.features.map((feature: string) => (
                                <li class="flex items-start gap-3">
                                    <div class="mt-1 flex-shrink-0">
                                        {card.highlight ? (
                                            <AiFillCheckCircle className="fill-primary" />
                                        ) : (
                                            <AiOutlineCloseCircle className="fill-red-400" />
                                        )}
                                    </div>
                                    <span class="text-text-dark">{feature}</span>
                                </li>
                            ))}
                        </ul>

                        {card.button.enable && (
                            <a 
                                href={card.button.link} 
                                class={`btn w-full block text-center ${card.highlight ? 'btn-primary' : 'btn-outline-white bg-white hover:bg-theme-light text-text-dark border-border'}`}
                            >
                                {card.button.label}
                            </a>
                        )}
                    </div>
                ))}
            </div>
        </div>
      </div>
    </div>
  </section>
)}
